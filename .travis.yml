language: python
cache: pip
sudo: false
dist: trusty

python:
  - "3.4"
  - "3.5"
  - "3.6"

before_install:
  - git fetch --unshallow || true

install:
  - pip install -U pip setuptools
  - pip install --pre pybuilder
  - pyb -X install_dependencies

script:
  - pyb -X

deploy:
  provider: pypi
  user: esc
  distributions: sdist
  skip_cleanup: true
  password:
    secure: "wIdpBlg/ZgK7HtQ7RG5nOqBrCyyFanaOlRrgHgRops7VrRDZuscKsndKnRKWmwWwbheZ8NzIhXI6msIns/9pClASowWHj28Hrq4oCVx6bPB3POPaXzK8gZNZkLA8AocTgGPI4BYduglkXmb5A360zIeIHeCdJB5hMyR1GEZeI9Pc7sKntjZZsZbgXj2jw8btKHfrQNsSE7NLXDCVmzfynwT27eL9G4dfHkynCsXUdkfrFzyJoD7aJ9+zwx10azTh/IsGxynUShI0kpMc3LqLKgTWByZUC6xoE+Y/E5gjvNiiMhSLldZWbwW96ZsFuZ0h1pPjloRyvLmSkI17oHiZzeOcdIs9ED4QDDognnQYnX+LJwS7zem1IGocYoAZwJ6/vBeTk68WvW/X9OIQgdRQgt5i4uv2xY/9SQLyXjzoaRa5N9I4nxdp5G3b+Avtezp+aMhp3ly4rWuhz6OLpYPfRWyOk6NnO6NPAfEhAuMJDnn4GKcL52yhdWJ/B8i2knG/IgKZ95yAwE+XW3PRkwrnbYS+LIi8WUfwnhCfIpTYre+5cXc87jM9z8e8w5j5cn9e9TkuZ+jDRM5H7nqJv6jQU2WM9t+QzL6l1I6S3BhVuHqMXXs5MRPGzRiYpUCM9YHUHsNNxybyLDcGU1dgdDpwvifk5GujK2A/GvaImQM+6xo="
  on:
    repo: TwentyBN/twentybn-dl
    python: '3.6'
    branch: master
