language: python
cache: pip

python:
  - "3.4"
  - "3.5"
  - "3.6"

before_install:
  - git fetch --unshallow || true

install:
  - pip install -U pip setuptools
  - pip install --pre pybuilder
  - pyb -X install_dependencies

script:
  - pyb -X

deploy:
  provider: pypi
  user: esc
  distributions: sdist
  skip_cleanup: true
  password:
    secure: "mu+9z0cBQyzQZMTb/7Q9K8crlCxIdmSazazgcGagiWHcYE4UylZik3zGmidoBJrKXZpR+x6QFdkm9jJNgXNRF5cK902f3KRuKZtjo+1mMijIw4sVwuZZB8Yn4/lim9gwNm5RwKBE5z3XnmQg2LhjGIRlpzStRgq8rbCIzJHfN2hrfp/25qR3WyDGbyc63XH46gxyybTIeULKHmo6nWxkRpnSUspBoAhJe7bu05DwxoAUOlDCON5Cf4kgC0tVWhZp02wZCozUB3alWzjyFvGZJsU8Xao0z3MZDpJrnptXC0az9itx2wAIFSGogSqPqbyg5YqbrU1U3AEk6/j3JHguBbnHZRGDFdkYUP64+ci0crimslWCXAlXrEJTPvp+Su0Gu0Z8189di9sLHDeDsDvRYtMlUTpDDzcYNEhVwGDPWKDK5XQmwWjf6PZV15IB0WsrqeCSueJnB8bpZoFYeIcVixmQahQ2Cd46aCjNK77hyu3ALx251NVHmDKQa1TcJpYXv1bRKQNUB3Kor5JWnUmagbfSJWjEoXkXJhfs5f2sKLRn5dAbzQ2t6wen4TVzgYE/C4tv2kVAcVTeOJhiKyzGiZQBEhxSO1VcT6JYRNL9iknvM1WlUiCo+QgIS3r2u+pmzCyGWwP1C7BdMUDUXW4CnkxplipHRNnYolFvmNnSeSc="
  on:
    repo: TwentyBN/twentybn-dl
    python: '3.6'
    branch: master
after_deploy:
  - cat $HOME/.pypirc
